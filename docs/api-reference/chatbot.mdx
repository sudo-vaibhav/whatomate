---
title: Chatbot
description: "Configure chatbot automation and AI responses"
---

## Overview

The Chatbot API allows you to configure automated responses, keyword rules, conversation flows, and AI-powered responses.

## Chatbot Settings

### Get Settings

Retrieve current chatbot settings.

```bash
GET /api/chatbot/settings
```

### Response

```json
{
  "status": "success",
  "data": {
    "id": "uuid",
    "account_id": "uuid",
    "chatbot_enabled": true,
    "ai_enabled": true,
    "ai_provider": "openai",
    "ai_model": "gpt-4o-mini",
    "ai_temperature": 0.7,
    "ai_max_tokens": 500,
    "system_prompt": "You are a helpful customer service assistant...",
    "fallback_message": "Sorry, I didn't understand that. Please try again.",
    "transfer_keywords": ["agent", "human", "help"],
    "business_hours_enabled": false
  }
}
```

### Update Settings

Update chatbot settings.

```bash
PUT /api/chatbot/settings
```

### Request Body

```json
{
  "chatbot_enabled": true,
  "ai_enabled": true,
  "ai_provider": "anthropic",
  "ai_model": "claude-3-5-sonnet-latest",
  "ai_temperature": 0.7,
  "system_prompt": "You are a helpful assistant for our e-commerce store..."
}
```

## Keyword Rules

### List Rules

```bash
GET /api/chatbot/keywords
```

### Response

```json
{
  "status": "success",
  "data": {
    "items": [
      {
        "id": "uuid",
        "name": "Greeting Response",
        "keywords": ["hello", "hi", "hey"],
        "match_type": "contains",
        "response_type": "text",
        "response": "Hello! How can I help you today?",
        "priority": 10,
        "enabled": true
      }
    ]
  }
}
```

### Create Rule

```bash
POST /api/chatbot/keywords
```

### Request Body

```json
{
  "name": "Business Hours",
  "keywords": ["hours", "open", "when"],
  "match_type": "contains",
  "response_type": "text",
  "response": "We're open Monday-Friday, 9 AM to 6 PM EST.",
  "priority": 5,
  "enabled": true
}
```

### Match Types

| Type | Description |
|------|-------------|
| `exact` | Message must match keyword exactly |
| `contains` | Message contains the keyword |
| `starts_with` | Message starts with the keyword |
| `regex` | Regular expression pattern match |

### Update Rule

```bash
PUT /api/chatbot/keywords/{id}
```

### Delete Rule

```bash
DELETE /api/chatbot/keywords/{id}
```

## AI Contexts

AI Contexts provide additional knowledge to the AI for specific topics.

### List Contexts

```bash
GET /api/chatbot/ai-contexts
```

### Response

```json
{
  "status": "success",
  "data": {
    "items": [
      {
        "id": "uuid",
        "name": "Product Catalog",
        "trigger_keywords": ["product", "price", "buy"],
        "context_type": "static",
        "content": "Our products include...",
        "priority": 10,
        "enabled": true
      }
    ]
  }
}
```

### Create Context

```bash
POST /api/chatbot/ai-contexts
```

### Request Body

```json
{
  "name": "Shipping Policy",
  "trigger_keywords": ["shipping", "delivery", "track"],
  "context_type": "static",
  "content": "We offer free shipping on orders over $50. Standard delivery takes 3-5 business days...",
  "priority": 5,
  "enabled": true
}
```

### Context Types

| Type | Description |
|------|-------------|
| `static` | Fixed text content |
| `api` | Fetched from external API |

### Update Context

```bash
PUT /api/chatbot/ai-contexts/{id}
```

### Delete Context

```bash
DELETE /api/chatbot/ai-contexts/{id}
```

## Conversation Flows

### List Flows

```bash
GET /api/chatbot/flows
```

### Response

```json
{
  "status": "success",
  "data": {
    "items": [
      {
        "id": "uuid",
        "name": "Order Status",
        "trigger_keywords": ["order", "status"],
        "steps": [...],
        "enabled": true
      }
    ]
  }
}
```

### Create Flow

```bash
POST /api/chatbot/flows
```

### Request Body

```json
{
  "name": "Feedback Collection",
  "trigger_keywords": ["feedback", "review"],
  "steps": [
    {
      "id": "welcome",
      "type": "message",
      "content": "We'd love to hear your feedback!",
      "next": "rating"
    },
    {
      "id": "rating",
      "type": "input",
      "input_type": "buttons",
      "content": "How would you rate your experience?",
      "options": ["Excellent", "Good", "Average", "Poor"],
      "variable": "rating",
      "next": "comment"
    },
    {
      "id": "comment",
      "type": "input",
      "input_type": "text",
      "content": "Any additional comments?",
      "variable": "comment",
      "next": "complete"
    },
    {
      "id": "complete",
      "type": "message",
      "content": "Thank you for your feedback!"
    }
  ]
}
```

### Update Flow

```bash
PUT /api/chatbot/flows/{id}
```

### Delete Flow

```bash
DELETE /api/chatbot/flows/{id}
```

## Agent Transfers

### List Transfers

Get pending agent transfer requests.

```bash
GET /api/chatbot/transfers
```

### Create Transfer

Manually transfer a conversation to a human agent.

```bash
POST /api/chatbot/transfers
```

### Request Body

```json
{
  "contact_id": "uuid",
  "reason": "Customer requested human support"
}
```

### Resume from Transfer

Resume chatbot after human agent completes interaction.

```bash
PUT /api/chatbot/transfers/{id}/resume
```

## Sessions

### List Sessions

View active chatbot sessions (for debugging).

```bash
GET /api/chatbot/sessions
```

### Get Session

Get details of a specific session.

```bash
GET /api/chatbot/sessions/{id}
```

### Response

```json
{
  "status": "success",
  "data": {
    "id": "uuid",
    "contact_id": "uuid",
    "current_flow_id": "uuid",
    "current_step": "rating",
    "variables": {
      "name": "John"
    },
    "started_at": "2024-01-01T12:00:00Z",
    "last_activity": "2024-01-01T12:05:00Z"
  }
}
```

<Tip>
  Use the Sessions API to debug chatbot interactions and understand the conversation state.
</Tip>
